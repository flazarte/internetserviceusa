var BroadbandNow = (function () { return { loadmaps: function() { var aTags = document.getElementsByClassName('bbn-embed'); var j = 1; var acnt = aTags.length; for (var i = 0; i< acnt; i++) { var s = aTags[0]; /*getElementsByTagName is live. updated each iteration, so current tag is always first*/ var iw = ((s.getAttribute('data-width')) ? (s.getAttribute('data-width')) : s.parentNode.offsetWidth)-2; var ih = (iw * .75).toFixed(0); var cw = iw+2; var ch = ((iw * .75)+18).toFixed(0); var wg = s.getAttribute("data-widget")?s.getAttribute("data-widget").toLowerCase():''; var src = ''; var errt = ''; var st = s.getAttribute("data-state"); var v = s.pathname.substr(1); var v2 = s.getAttribute("data-v2")?s.getAttribute("data-v2").replace('https://broadbandnow.com/','').replace('http://broadbandnow.com/',''):''; var div = document.createElement('div'); div.id = 'bbn-container-' + j.toString(); div.setAttribute('style', 'position:relative;background-color:#fff;border: 1px solid #f3f3f3;width:'+cw+'px;height:'+ch+'px;'); if (wg) src = 'https://broadbandnow.com/widgets/iframe/map/' + wg +'?v=' + v +'&v2=' + v2 + '&w=' + iw + '&h=' + ih + '&r=' + encodeURIComponent(document.location); else errt = 'Must specify widget type with data-widget attribute.'; if (s.hostname!=='broadbandnow.com') errt = 'Cannot create map. Invalid embed code.'; if (!(iw>0)) errt = 'Containing div has 0 width'; if (src && !errt) { iframe = document.createElement('iframe'); iframe.setAttribute('src', src); iframe.setAttribute('width', iw); iframe.setAttribute('height', ih); iframe.setAttribute('frameborder', '0'); iframe.setAttribute('scrolling', 'no'); div.appendChild(iframe);         var sp = document.createElement('span'); sp.setAttribute('style', 'position:absolute;height:21px;bottom:0;right:0;font-family:sans-serif;color:#666;font-size:12px;padding:2px;overflow:hidden;'); s.style.cssText = 'text-decoration:none;color:#666;'; s.setAttribute('class',''); s.parentNode.replaceChild(div, s); sp.appendChild(s); sp.innerHTML+='&nbsp;&copy BroadbandNow'; div.appendChild(sp); } else { div.innerHTML += errt; } j++; } }
} }());BroadbandNow.loadmaps();